---
interface Props {
	label: string;
	name: string;
	type?: 'text' | 'email' | 'tel' | 'textarea' | 'date' | 'select';
	required?: boolean;
	placeholder?: string;
	options?: { value: string; label: string }[];
	rows?: number;
}

const {
	label,
	name,
	type = 'text',
	required = false,
	placeholder = '',
	options = [],
	rows = 4
} = Astro.props;

const inputId = `field-${name}`;
---

<div class="form-field">
    <label for={inputId} class="form-label">
		{label}
		{required && <span class="required-indicator" aria-hidden="true">*</span>}
    </label>

	{type === 'textarea' ? (
            <textarea
                    id={inputId}
                    name={name}
                    class="form-input form-textarea"
                    required={required}
                    placeholder={placeholder}
                    rows={rows}
            ></textarea>
	) : type === 'select' ? (
            <select
                    id={inputId}
                    name={name}
                    class="form-input form-select"
                    required={required}
            >
                <option value="" disabled selected>{placeholder || 'Select an option'}</option>
				{options.map(opt => (
                        <option value={opt.value}>{opt.label}</option>
				))}
            </select>
	) : (
            <input
                    type={type}
                    id={inputId}
                    name={name}
                    class="form-input"
                    required={required}
                    placeholder={placeholder}
            />
	)}
</div>

<style>
    .form-field {
        margin-bottom: var(--space-lg);
    }

    .form-label {
        display: block;
        font-size: var(--text-sm);
        font-weight: 300;
        letter-spacing: 0.05em;
        color: var(--text-secondary);
        margin-bottom: var(--space-sm);
    }

    .required-indicator {
        color: var(--accent-warm);
        margin-left: 2px;
    }

    .form-input {
        width: 100%;
        padding: var(--space-md);
        background: var(--void-soft);
        border: 1px solid var(--border-visible);
        border-radius: 4px;
        color: var(--text-primary);
        font-family: var(--font-body), serif;
        font-size: var(--text-base);
        font-weight: 300;
        transition: border-color var(--transition-base), background var(--transition-base);
    }

    .form-input::placeholder {
        color: var(--text-muted);
    }

    .form-input:hover {
        border-color: var(--nav-default);
    }

    .form-input:focus {
        outline: none;
        border-color: var(--nav-hover);
        background: var(--void-lighter);
    }

    .form-textarea {
        resize: vertical;
        min-height: 120px;
        line-height: 1.6;
    }

    .form-select {
        cursor: pointer;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%23888888' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right var(--space-md) center;
        padding-right: calc(var(--space-md) * 2 + 12px);
    }

    .form-select option {
        background: var(--void-soft);
        color: var(--text-primary);
    }
</style>
